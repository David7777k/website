# üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Google OAuth –¥–ª—è localhost

–ï—Å–ª–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ Google –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É **400: redirect_uri_mismatch**, —Å–ª–µ–¥—É–π—Ç–µ —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

## –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Google Cloud Console

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [Google Cloud Console](https://console.cloud.google.com/)
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç Google

## –®–∞–≥ 2: –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç

1. –í –≤–µ—Ä—Ö–Ω–µ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π)
2. –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ—Ç, –Ω–∞–∂–º–∏—Ç–µ "Create Project"

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ OAuth Consent Screen

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –Ω–∞–π–¥–∏—Ç–µ **APIs & Services** ‚Üí **OAuth consent screen**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: **External** (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
   - App name: **PANDA Lounge**
   - User support email: –≤–∞—à email
   - Developer contact email: –≤–∞—à email
4. –ù–∞–∂–º–∏—Ç–µ **Save and Continue**
5. –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–µ Scopes (–Ω–∞–∂–º–∏—Ç–µ **Save and Continue**)
6. –î–æ–±–∞–≤—å—Ç–µ Test Users (–≤–∞—à email –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

## –®–∞–≥ 4: –°–æ–∑–¥–∞–π—Ç–µ OAuth Client ID

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services** ‚Üí **Credentials**
2. –ù–∞–∂–º–∏—Ç–µ **+ CREATE CREDENTIALS** ‚Üí **OAuth client ID**
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø: **Web application**
4. –£–∫–∞–∂–∏—Ç–µ –∏–º—è: **PANDA Lounge Web Client**

## –®–∞–≥ 5: –î–æ–±–∞–≤—å—Ç–µ Authorized redirect URIs

‚ö†Ô∏è **–≠–¢–û –°–ê–ú–´–ô –í–ê–ñ–ù–´–ô –®–ê–ì!**

–í —Ä–∞–∑–¥–µ–ª–µ **Authorized redirect URIs** –¥–æ–±–∞–≤—å—Ç–µ:

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (localhost):
```
http://localhost:3000/api/auth/callback/google
```

### –î–ª—è production (–∫–æ–≥–¥–∞ –¥–µ–ø–ª–æ–∏—Ç–µ):
```
https://–≤–∞—à-–¥–æ–º–µ–Ω.com/api/auth/callback/google
```

**–í–∞–∂–Ω–æ:** 
- URL –¥–æ–ª–∂–µ–Ω —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å, –≤–∫–ª—é—á–∞—è `/api/auth/callback/google`
- –ù–µ –∑–∞–±—É–¥—å—Ç–µ –Ω–∞–∂–∞—Ç—å **ENTER** –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ –∫–∞–∂–¥–æ–≥–æ URL
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `http://` –¥–ª—è localhost (–Ω–µ `https://`)

## –®–∞–≥ 6: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ credentials

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è:
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Client ID** 
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Client Secret**
3. –í—Å—Ç–∞–≤—å—Ç–µ –∏—Ö –≤ —Ñ–∞–π–ª `.env`:

```env
GOOGLE_CLIENT_ID="–≤–∞—à-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="–≤–∞—à-client-secret"
```

## –®–∞–≥ 7: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞
yarn dev
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Google Cloud Console:
- ‚úÖ OAuth consent screen –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –í–∞—à email –¥–æ–±–∞–≤–ª–µ–Ω –≤ Test Users
- ‚úÖ Redirect URI —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç: `http://localhost:3000/api/auth/callback/google`
- ‚úÖ Client ID –∏ Secret —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ `.env`

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞ 400: redirect_uri_mismatch
**–ü—Ä–∏—á–∏–Ω–∞:** Redirect URI –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –≤ Google Console

**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ Google Console
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ–Ω —Ç–æ—á–Ω–æ: `http://localhost:3000/api/auth/callback/google`
3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ Google Console

### –û—à–∏–±–∫–∞ 403: access_denied
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –≤ production mode –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤ Test Users

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à email –≤ Test Users
2. –ò–ª–∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Publishing status ‚Üí Publish App)

### –û—à–∏–±–∫–∞: This app isn't verified
**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!**
1. –ù–∞–∂–º–∏—Ç–µ "Advanced"
2. –ù–∞–∂–º–∏—Ç–µ "Go to PANDA Lounge (unsafe)"
3. –î–ª—è production –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é Google

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤—Ö–æ–¥

–ï—Å–ª–∏ Google OAuth –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
- **Email/Password**: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –¢–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç:
  - Email: `demo@panda.com`
  - Password: `demo123`

## –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç 3000 —Å–≤–æ–±–æ–¥–µ–Ω
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å cookies –∏ cache –±—Ä–∞—É–∑–µ—Ä–∞

---

**–ì–æ—Ç–æ–≤–æ!** –ü–æ—Å–ª–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Google –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å. üéâ
